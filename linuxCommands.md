#Terminalcd -> navigate to directory

- export x = i -> Store local terminal variable
- ls -> list directories
- mkdir -> creates directory
- nano ->
- sudo -> super user permissions to other commands
- cd folderpath -> open folder path
- grep "text" -> find text in a document
- man program -> program manual
- -& -> run process in background
- whoami -> shows actual logged in user
  / -> root directory contains OS
  /home -> contains users folders, like juanito
  /etc/cache -> system cache

## Useful apps

Press windows key + start typing:

- Terminal
- Text editor

### VIM

- Esc -> Command mode
- i: -> C Insert mode
- :w: Write the file
- :q: Quit
- xtimes and then a command repeat following command x times
- :x delete character
- :dw delete whole word
- :u undo
- ctrl + r redo
- :d starts delete operation
- V select text

# SUID

So, what are files with the SUID bit set? Essentially, this means that the file or files can be run with the permissions of the file(s) owner/group. In this case, as the super-user. We can leverage this to get a shell with these privileges!

# Method

This sounds complicated, but really- provided you're familiar with how SUID files work, it's fairly easy to understand. We're able to upload files to the NFS share, and control the permissions of these files. We can set the permissions of whatever we upload, in this case a bash shell executable. We can then log in through SSH, as we did in the previous task- and execute this executable to gain a root shell!

# Step by Step NFS Hacking

    NFS Access ->

        Gain Low Privilege Shell ->

            Upload Bash Executable to the NFS share ->

                Set SUID Permissions Through NFS Due To Misconfigured Root Squash ->

                    Login through SSH ->

                        Execute SUID Bit Bash Executable ->

                            ROOT ACCESS

## NMAP

- nmap -A -oN nmap-$ip.out -p- $ip -vv

#Enumerating SMTP & Users

## MetaSploit

-

# Useful urls

- http://pentestmonkey.net/

# Hash type identifying

    - https://hashes.com/en/tools/hash_identifier

    - Hash-Identifier
    To use hash-identifier, you can just pull the python file from gitlab using: wget https://gitlab.com/kalilinux/packages/hash-identifier/-/raw/kali/master/hash-id.py.

    Then simply launch it with python3 hash-id.py and then enter the hash you're trying to identify- and it will give you possible formats!

# John the Ripper

https://www.openwall.com/john/

- Basic Syntax

$ john [options] [path to file]

[path to file] - The file containing the hash you're trying to crack, if it's in the same directory you won't need to name a path, just the file.

- Automatic Cracking

John has built-in features to detect what type of hash it's being given, and to select appropriate rules and formats to crack it for you, this isn't always the best idea as it can be unreliable- but if you can't identify what hash type you're working with and just want to try cracking it, it can be a good option! To do this we use the following syntax:

$ john --wordlist=[path to wordlist] [path to file]

--wordlist= - Specifies using wordlist mode, reading from the file that you supply in the following path...

Example Usage:

john --wordlist=/usr/share/wordlists/rockyou.txt hash_to_crack.txt

    # Format-Specific Cracking

    john --format=[format] --wordlist=[path to wordlist] [path to file]

    --format= - This is the flag to tell John that you're giving it a hash of a specific format, and to use the following format to crack it

    [format] - The format that the hash is in

    Example Usage:

    john --format=raw-md5 --wordlist=/usr/share/wordlists/rockyou.txt hash_to_crack.txt

    A Note on Formats:

    When you are telling john to use formats, if you're dealing with a standard hash type, e.g. md5 as in the example above, you have to prefix it with raw- to tell john you're just dealing with a standard hash type, though this doesn't always apply. To check if you need to add the prefix or not, you can list all of John's formats using john --list=formats and either check manually, or grep for your hash type using something like john --list=formats | grep -iF "md5".


    # Unshadowing

        John can be very particular about the formats it needs data in to be able to work with it, for this reason- in order to crack /etc/shadow passwords, you must combine it with the /etc/passwd file in order for John to understand the data it's being given. To do this, we use a tool built into the John suite of tools called unshadow. The basic syntax of unshadow is as follows:

        unshadow [path to passwd] [path to shadow]

        unshadow - Invokes the unshadow tool

        [path to passwd] - The file that contains the copy of the /etc/passwd file you've taken from the target machine

        [path to shadow] - The file that contains the copy of the /etc/shadow file you've taken from the target machine

        Example Usage:

        unshadow local_passwd local_shadow > unshadowed.txt.
        * Note on the files

            When using unshadow, you can either use the entire /etc/passwd and /etc/shadow file- if you have them available, or you can use the relevant line from each, for example:

            FILE 1 - local_passwd

            Contains the /etc/passwd line for the root user:

            root:x:0:0::/root:/bin/bash

            FILE 2 - local_shadow

            Contains the /etc/shadow line for the root user:

            root:$6$2nwjN454g.dv4HN/$m9Z/r2xVfweYVkrr.v5Ft8Ws3/YYksfNwq96UL1FX0OJjY1L6l.DS3KEVsZ9rOVLB/ldTeEL/OIhJZ4GMFMGA0:18576::::::

        * Cracking

            We're then able to feed the output from unshadow, in our example use case called "unshadowed.txt" directly into John. We should not need to specify a mode here as we have made the input specifically for John, however in some cases you will need to specify the format as we have done previously using: --format=sha512crypt

            john --wordlist=/usr/share/wordlists/rockyou.txt --format=sha512crypt unshadowed.txt

    * Using Single Crack Mode

        To use single crack mode, we use roughly the same syntax that we've used to so far, for example if we wanted to crack the password of the user named "Mike", using single mode, we'd use:

        john --single --format=[format] [path to file]

        --single - This flag lets john know you want to use the single hash cracking mode.

        Example Usage:

        john --single --format=raw-sha256 hashes.txt

        *A Note on File Formats in Single Crack Mode:

            If you're cracking hashes in single crack mode, you need to change the file format that you're feeding john for it to understand what data to create a wordlist from. You do this by prepending the hash with the username that the hash belongs to, so according to the above example- we would change the file hashes.txt

            From:

            1efee03cdcb96d90ad48ccc7b8666033

            To

            mike:1efee03cdcb96d90ad48ccc7b8666033

    * How to create Custom Rules

        Custom rules are defined in the john.conf file, usually located in /etc/john/john.conf if you have installed John using a package manager or built from source with make and in /opt/john/john.conf on the TryHackMe Attackbox.

        As a full command: john --wordlist=[path to wordlist] --rule=PoloPassword [path to file]
